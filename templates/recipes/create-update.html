{% extends 'base.html' %}

{% block content %}
{% if message %}
<p>{{ message }}</p>
{% endif %}
<div style="margin-top: 30px;">
    <h2>Recipe</h2>
    <form action="." method="POST">
        {% csrf_token %}
        {% for field in form %}
        <div class="{% if field.field.required %}{{ form.required_css_class }}{% endif %}">
            {{ field.errors }}
            {{ field.label }} {{ field }}
            {% if field.help_text %}
                <p class="help">{{ field.help_text|safe}}</p>
            {% endif %}
        </div>
        {% endfor %}

        {% if formset %}
        <h3>Ingredients</h3>
        {{ formset.management_form }}
        {% for form in formset %}
            <div class="ingredient-form">
                {{ form.as_p }}
            </div>
        {% endfor %}
        {% endif %}
        <button type="submit">Save</button>
    </form>
</div>
{% endblock content %}